# Interface configuration for ST-Link
source [find interface/stlink.cfg]

# Target configuration for STM32F4 series
source [find target/stm32f4x.cfg]

# Set the adapter speed (in kHz)
adapter_khz 1800

# Enable ITM (Instrumentation Trace Macrocell)
# Configure the TPIU (Trace Port Interface Unit) to output to /dev/stdout
stm32f4x.tpiu configure -protocol uart -traceclk 8000000 -output /dev/stdout -formatter off

# Enable ITM port 0
itm port 0 on